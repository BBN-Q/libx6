#!/bin/bash

# Creates the Matlab compatible version of the header file

cp ../lib/libx6adc.h libx6adc.matlab.h

#Strip out the contstructor/destructor attributes Matlab can't handle
#Change the path to the includes
#Change uint32_t to unsigned
#Remove unexported update_log function
sed -i '
/.*attribute.*/d
s/^#include "X6/#include "..\/lib\/X6/g
s/uint32_t/unsigned/g
/^#include <complex.h>/d
/^#undef I/d
s/_Complex//g
/^X6_STATUS update_log/d' libx6adc.matlab.h
